var $=Object.defineProperty;var D=(t,e,s)=>e in t?$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var m=(t,e,s)=>D(t,typeof e!="symbol"?e+"":e,s);import{_ as B,a as M}from"./DropdownLink-B1xel3Kp.js";import{_ as j}from"./InputError-BJCQ_2OS.js";import{_ as P}from"./PrimaryButton-CoZ8PQbO.js";import{C as V,x as N,i as w,j as d,e as c,a as r,t as g,f as v,c as E,w as u,k as y,p as F,s as O,b as h,o as p,g as _}from"./app-DCXzMWXa.js";import{t as z,d as L,C as I,V as S}from"./index-CSEC8W1N.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";var T=Object.defineProperty,U=Object.getOwnPropertyDescriptor,x=(t,e,s,a)=>{for(var o=a>1?void 0:a?U(e,s):e,l=t.length-1,i;l>=0;l--)(i=t[l])&&(o=(a?i(e,s,o):i(o))||o);return a&&o&&T(e,s,o),o};let f=class extends S{constructor(){super(...arguments);m(this,"chirp");m(this,"editing",!1);m(this,"form",V({message:""}))}mounted(){this.resetForm()}get createdAt(){return N(this.chirp.created_at).fromNow()}resetForm(s=!1){this.editing=s,this.form.reset(),this.form.message=this.chirp.message}async update(){let s=await w.put(route("chirps.update",this.chirp.id),{message:this.form.message});this.$emit("update",s.data.chirp),this.resetForm(),this.editing=!1}async remove(){let s=await w.delete(route("chirps.destroy",this.chirp.id));console.log(s),this.$emit("remove",this.chirp.id)}};x([L(Object)],f.prototype,"chirp",2);f=x([I({components:{Dropdown:B,DropdownLink:M,InputError:j,PrimaryButton:P}})],f);const q=z(f),G={class:"p-6 flex space-x-2"},H={class:"flex-1"},J={class:"flex justify-between items-center"},K={class:"text-gray-800"},Q={class:"ml-2 text-sm text-gray-600"},R={key:0,class:"text-sm text-gray-600"},W={class:"space-x-2"},X={key:1,class:"mt-4 text-lg text-gray-900"};function Y(t,e,s,a,o,l){const i=d("DropdownLink"),C=d("Dropdown"),b=d("InputError"),k=d("PrimaryButton");return p(),c("div",G,[e[7]||(e[7]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-600 -scale-x-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),r("div",H,[r("div",J,[r("div",null,[r("span",K,g(t.chirp.user.name),1),r("small",Q,g(this.createdAt),1),t.chirp.created_at!==t.chirp.updated_at?(p(),c("small",R," Â· edited")):v("",!0)]),t.chirp.user.id===t.$page.props.auth.user.id?(p(),E(C,{key:0},{trigger:u(()=>e[4]||(e[4]=[r("button",null,[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})])],-1)])),content:u(()=>[r("button",{class:"block w-full px-4 py-2 text-left text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:bg-gray-100 transition duration-150 ease-in-out",onClick:e[0]||(e[0]=n=>this.resetForm(!0))}," Edit "),h(i,{as:"button",onClick:y(t.remove,["prevent"])},{default:u(()=>e[5]||(e[5]=[_(" Delete ")])),_:1},8,["onClick"])]),_:1})):v("",!0)]),t.editing?(p(),c("form",{key:0,onSubmit:e[3]||(e[3]=y((...n)=>t.update&&t.update(...n),["prevent"]))},[F(r("textarea",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.form.message=n),class:"mt-4 w-full text-gray-900 border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"},null,512),[[O,t.form.message]]),h(b,{message:t.form.errors.message,class:"mt-2"},null,8,["message"]),r("div",W,[h(k,{class:"mt-4"},{default:u(()=>e[6]||(e[6]=[_("Save")])),_:1}),r("button",{class:"mt-4",onClick:e[2]||(e[2]=n=>this.resetForm(!1))},"Cancel")])],32)):(p(),c("p",X,g(t.chirp.message),1))])])}const ne=A(q,[["render",Y]]);export{ne as C};
