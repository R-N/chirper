var xe=Object.defineProperty;var ye=(e,t,o)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var _=(e,t,o)=>ye(e,typeof t!="symbol"?t+"":t,o);import{I as Ve}from"./InputError-Bwl4ZAo1.js";import{p as we,g as Ce,u as Fe,l as S,r as V,s as Pe,y as be,j as Ie,h as w,Z as ke,n as _e,v as z,_ as Se,S as Be,b as s,t as N,F as H,T as K,U as Ne,$ as Re,a0 as $e,a1 as Ee,C as Me,a2 as Ae,z as Q,A as De,B,w as d,a as x,H as T,D as W,c as ze,J as X,o as C,E as y}from"./app-DrYLPU_X.js";import{t as He,d as Te,C as je,V as Oe,a as R,_ as Ue}from"./_plugin-vue_export-helper-BUg55JK2.js";import{m as Ge,c as Le,u as Je,b as Y,d as ee,e as Ze}from"./VField-C66dwn1o.js";import{f as qe}from"./forwardRefs-DiIHdaJ1.js";import{I as Ke,j}from"./VAvatar-CGwUysPS.js";import{V as te}from"./VMenu-BjaZOc8Q.js";import{V as ae,a as O}from"./VList-BpIqBKLG.js";const Qe=we({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ge(),...Le()},"VTextarea"),se=Ce()({name:"VTextarea",directives:{Intersect:Ke},inheritAttrs:!1,props:Qe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:o,emit:m,slots:n}=t;const r=Fe(e,"modelValue"),{isFocused:i,focus:c,blur:ne}=Je(e),re=S(()=>typeof e.counterValue=="function"?e.counterValue(r.value):(r.value||"").toString().length),le=S(()=>{if(o.maxlength)return o.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function ie(a,u){var l,f;!e.autofocus||!a||(f=(l=u[0].target)==null?void 0:l.focus)==null||f.call(l)}const U=V(),F=V(),G=Pe(""),P=V(),ue=S(()=>e.persistentPlaceholder||i.value||e.active);function E(){var a;P.value!==document.activeElement&&((a=P.value)==null||a.focus()),i.value||c()}function de(a){E(),m("click:control",a)}function ce(a){m("mousedown:control",a)}function fe(a){a.stopPropagation(),E(),z(()=>{r.value="",$e(e["onClick:clear"],a)})}function me(a){var l;const u=a.target;if(r.value=u.value,(l=e.modelModifiers)!=null&&l.trim){const f=[u.selectionStart,u.selectionEnd];z(()=>{u.selectionStart=f[0],u.selectionEnd=f[1]})}}const p=V(),b=V(Number(e.rows)),M=S(()=>["plain","underlined"].includes(e.variant));be(()=>{e.autoGrow||(b.value=Number(e.rows))});function h(){e.autoGrow&&z(()=>{if(!p.value||!F.value)return;const a=getComputedStyle(p.value),u=getComputedStyle(F.value.$el),l=parseFloat(a.getPropertyValue("--v-field-padding-top"))+parseFloat(a.getPropertyValue("--v-input-padding-top"))+parseFloat(a.getPropertyValue("--v-field-padding-bottom")),f=p.value.scrollHeight,I=parseFloat(a.lineHeight),A=Math.max(parseFloat(e.rows)*I+l,parseFloat(u.getPropertyValue("--v-input-control-height"))),D=parseFloat(e.maxRows)*I+l||1/0,g=Ee(f??0,A,D);b.value=Math.floor((g-l)/I),G.value=Se(g)})}Ie(h),w(r,h),w(()=>e.rows,h),w(()=>e.maxRows,h),w(()=>e.density,h);let v;return w(p,a=>{a?(v=new ResizeObserver(h),v.observe(p.value)):v==null||v.disconnect()}),ke(()=>{v==null||v.disconnect()}),_e(()=>{const a=!!(n.counter||e.counter||e.counterValue),u=!!(a||n.details),[l,f]=Be(o),{modelValue:I,...A}=Y.filterProps(e),D=ee.filterProps(e);return s(Y,N({ref:U,modelValue:r.value,"onUpdate:modelValue":g=>r.value=g,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":M.value},e.class],style:e.style},l,A,{centerAffix:b.value===1&&!M.value,focused:i.value}),{...n,default:g=>{let{id:k,isDisabled:L,isDirty:J,isReadonly:ve,isValid:ge}=g;return s(ee,N({ref:F,style:{"--v-textarea-control-height":G.value},onClick:de,onMousedown:ce,"onClick:clear":fe,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},D,{id:k.value,active:ue.value||J.value,centerAffix:b.value===1&&!M.value,dirty:J.value||e.dirty,disabled:L.value,focused:i.value,error:ge.value===!1}),{...n,default:pe=>{let{props:{class:Z,...q}}=pe;return s(H,null,[e.prefix&&s("span",{class:"v-text-field__prefix"},[e.prefix]),K(s("textarea",N({ref:P,class:Z,value:r.value,onInput:me,autofocus:e.autofocus,readonly:ve.value,disabled:L.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:E,onBlur:ne},q,f),null),[[Ne("intersect"),{handler:ie},null,{once:!0}]]),e.autoGrow&&K(s("textarea",{class:[Z,"v-textarea__sizer"],id:`${q.id}-sizer`,"onUpdate:modelValue":he=>r.value=he,ref:p,readonly:!0,"aria-hidden":"true"},null),[[Re,r.value]]),e.suffix&&s("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:u?g=>{var k;return s(H,null,[(k=n.details)==null?void 0:k.call(n,g),a&&s(H,null,[s("span",null,null),s(Ze,{active:e.persistentCounter||i.value,value:re.value,max:le.value,disabled:e.disabled},n.counter)])])}:void 0})}),qe({},U,F,P)}});var We=Object.defineProperty,Xe=Object.getOwnPropertyDescriptor,oe=(e,t,o,m)=>{for(var n=m>1?void 0:m?Xe(t,o):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(n=(m?i(t,o,n):i(n))||n);return m&&n&&We(t,o,n),n};let $=class extends Oe{constructor(){super(...arguments);_(this,"chirp");_(this,"editing",!1);_(this,"form",Me({message:""}))}mounted(){this.resetForm()}get createdAt(){return Ae(this.chirp.created_at).fromNow()}resetForm(o=!1){this.editing=o,this.form.reset(),this.form.message=this.chirp.message}async update(){let o=await Q.put(route("chirps.update",this.chirp.id),{message:this.form.message});this.$emit("update",o.data.chirp),this.resetForm(),this.editing=!1}async remove(){let o=await Q.delete(route("chirps.destroy",this.chirp.id));console.log(o),this.$emit("remove",this.chirp.id)}};oe([Te(Object)],$.prototype,"chirp",2);$=oe([je({components:{VMenu:te,VTextarea:se,VBtn:R,VIcon:j,VList:ae,VListItem:O,InputError:Ve}})],$);const Ye=He($),et={class:"p-6 flex space-x-2"},tt={class:"flex-1"},at={class:"flex justify-between items-center"},st={class:"text-gray-800"},ot={class:"ml-2 text-sm text-gray-600"},nt={key:0,class:"text-sm text-gray-600"},rt={class:"mt-4 d-flex gap-2"},lt={key:1,class:"mt-4 text-lg text-gray-900"};function it(e,t,o,m,n,r){const i=De("InputError");return C(),B("div",et,[s(j,{size:"32",class:"text-gray-600"},{default:d(()=>t[4]||(t[4]=[y("mdi-message")])),_:1}),x("div",tt,[x("div",at,[x("div",null,[x("span",st,T(e.chirp.user.name),1),x("small",ot,T(e.createdAt),1),e.chirp.created_at!==e.chirp.updated_at?(C(),B("small",nt," Â· edited")):W("",!0)]),e.chirp.user.id===e.$page.props.auth.user.id?(C(),ze(te,{key:0},{activator:d(({props:c})=>[s(R,N({icon:""},c,{variant:"plain"}),{default:d(()=>[s(j,null,{default:d(()=>t[5]||(t[5]=[y("mdi-dots-vertical")])),_:1})]),_:2},1040)]),default:d(()=>[s(ae,null,{default:d(()=>[s(O,{onClick:t[0]||(t[0]=c=>e.resetForm(!0))},{default:d(()=>t[6]||(t[6]=[y("Edit")])),_:1}),s(O,{onClick:X(e.remove,["prevent"])},{default:d(()=>t[7]||(t[7]=[y("Delete")])),_:1},8,["onClick"])]),_:1})]),_:1})):W("",!0)]),e.editing?(C(),B("form",{key:0,onSubmit:t[3]||(t[3]=X((...c)=>e.update&&e.update(...c),["prevent"]))},[s(se,{modelValue:e.form.message,"onUpdate:modelValue":t[1]||(t[1]=c=>e.form.message=c),class:"mt-4",label:"Edit message","auto-grow":""},null,8,["modelValue"]),s(i,{message:e.form.errors.message,class:"mt-2"},null,8,["message"]),x("div",rt,[s(R,{color:"primary",variant:"elevated",type:"submit"},{default:d(()=>t[8]||(t[8]=[y("Save")])),_:1}),s(R,{color:"secondary",variant:"text",onClick:t[2]||(t[2]=c=>e.resetForm(!1))},{default:d(()=>t[9]||(t[9]=[y("Cancel")])),_:1})])],32)):(C(),B("p",lt,T(e.chirp.message),1))])])}const yt=Ue(Ye,[["render",it]]);export{yt as C,se as V};
