var me=Object.defineProperty;var de=(t,e,s)=>e in t?me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var p=(t,e,s)=>de(t,typeof e!="symbol"?e+"":e,s);import{p as pe,m as fe,d as ve,g as ke,u as ce,e as ge,r as R,s as W,i as ye,f as Te,h as x,j as Ve,k as Ae,l as Pe,n as be,q as Ce,V as Fe,b as o,t as _,v as Se,x as we,y as De,C as U,z as Ie,W as Be,A as C,B as g,w as a,D as F,o as m,E as i,c as y,F as Y,G as h,a as G,H}from"./app-DrYLPU_X.js";import{A as Le}from"./ActionMessage-B1OvaZe4.js";import{A as Me,V as L}from"./ActionSection-45LSTfNX.js";import{F as $e}from"./FormSection-BkugsU1D.js";import{I as Ne}from"./InputError-Bwl4ZAo1.js";import{t as je,d as z,C as Ee,V as Oe,a as f,_ as Re}from"./_plugin-vue_export-helper-BUg55JK2.js";import{V as M,a as $,b as N,c as j}from"./VCard-Dz8tKv04.js";import{V as q}from"./VCheckbox-BzEFetGl.js";import{V as oe}from"./VTextField-GCQIZL8v.js";import{m as Ue,u as Ye,V as ee}from"./VOverlay-p4zMJbXj.js";import{f as he}from"./forwardRefs-DiIHdaJ1.js";import{m as Ge,a as He,b as We,c as qe,u as ze,d as Ke,e as Je,g as Qe,V as Xe,f as Ze}from"./VAvatar-CGwUysPS.js";import{V as S,a as w}from"./VRow-DvkPIYWF.js";import{V as xe,a as _e,b as et}from"./VList-BpIqBKLG.js";import{V as tt}from"./VField-C66dwn1o.js";import{V as te}from"./VSpacer-DDbWmUAr.js";import{V as ot}from"./VContainer-eLTv4ox0.js";import"./SectionTitle-C2PNohfj.js";/* empty css              */function at(t){const e=W(t());let s=-1;function l(){clearInterval(s)}function u(){l(),Se(()=>e.value=t())}function v(d){const V=d?getComputedStyle(d):{transitionDuration:.2},c=parseFloat(V.transitionDuration)*1e3||200;if(l(),e.value<=0)return;const A=performance.now();s=window.setInterval(()=>{const P=performance.now()-A+c;e.value=Math.max(t()-P,0),e.value<=0&&l()},c)}return Ce(l),{clear:l,time:e,start:v,reset:u}}const nt=pe({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Ge({location:"bottom"}),...He(),...We(),...qe(),...fe(),...ve(Ue({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),st=ke()({name:"VSnackbar",props:nt(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:s}=e;const l=ce(t,"modelValue"),{positionClasses:u}=ze(t),{scopeId:v}=Ye(),{themeClasses:d}=ge(t),{colorClasses:V,colorStyles:c,variantClasses:A}=Ke(t),{roundedClasses:P}=Je(t),n=at(()=>Number(t.timeout)),k=R(),K=R(),D=W(!1),J=W(0),Q=R(),ae=ye(Fe,void 0);Te(()=>!!ae,()=>{const r=we();De(()=>{Q.value=r.mainStyles.value})}),x(l,I),x(()=>t.timeout,I),Ve(()=>{l.value&&I()});let O=-1;function I(){n.reset(),window.clearTimeout(O);const r=Number(t.timeout);if(!l.value||r===-1)return;const b=Ae(K.value);n.start(b),O=window.setTimeout(()=>{l.value=!1},r)}function ne(){n.reset(),window.clearTimeout(O)}function se(){D.value=!0,ne()}function X(){D.value=!1,I()}function le(r){J.value=r.touches[0].clientY}function ie(r){Math.abs(J.value-r.changedTouches[0].clientY)>50&&(l.value=!1)}function re(){D.value&&X()}const ue=Pe(()=>t.location.split(" ").reduce((r,b)=>(r[`v-snackbar--${b}`]=!0,r),{}));return be(()=>{const r=ee.filterProps(t),b=!!(s.default||s.text||t.text);return o(ee,_({ref:k,class:["v-snackbar",{"v-snackbar--active":l.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},ue.value,u.value,t.class],style:[Q.value,t.style]},r,{modelValue:l.value,"onUpdate:modelValue":B=>l.value=B,contentProps:_({class:["v-snackbar__wrapper",d.value,V.value,P.value,A.value],style:[c.value],onPointerenter:se,onPointerleave:X},r.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:le,onTouchend:ie,onAfterLeave:re},v),{default:()=>{var B,Z;return[Qe(!1,"v-snackbar"),t.timer&&!D.value&&o("div",{key:"timer",class:"v-snackbar__timer"},[o(Xe,{ref:K,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,"model-value":n.time.value},null)]),b&&o("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((B=s.text)==null?void 0:B.call(s))??t.text,(Z=s.default)==null?void 0:Z.call(s)]),s.actions&&o(Ze,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[o("div",{class:"v-snackbar__actions"},[s.actions({isActive:l})])]})]},activator:s.activator})}),he({},k)}});var lt=Object.defineProperty,it=Object.getOwnPropertyDescriptor,E=(t,e,s,l)=>{for(var u=l>1?void 0:l?it(e,s):e,v=t.length-1,d;v>=0;v--)(d=t[v])&&(u=(l?d(e,s,u):d(u))||u);return l&&u&&lt(e,s,u),u};let T=class extends Oe{constructor(){super(...arguments);p(this,"tokens");p(this,"availablePermissions");p(this,"defaultPermissions");p(this,"createApiTokenForm",U({name:"",permissions:[]}));p(this,"updateApiTokenForm",U({permissions:[]}));p(this,"deleteApiTokenForm",U({}));p(this,"displayingToken",!1);p(this,"managingPermissionsFor",null);p(this,"apiTokenBeingDeleted",null)}mounted(){this.createApiTokenForm.permissions=this.defaultPermissions}async createApiToken(){this.createApiTokenForm.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{this.displayingToken=!0,this.createApiTokenForm.reset()}})}manageApiTokenPermissions(e){this.updateApiTokenForm.permissions=e.abilities,this.managingPermissionsFor=e}async updateApiToken(){this.updateApiTokenForm.put(route("api-tokens.update",this.managingPermissionsFor),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.managingPermissionsFor=null})}confirmApiTokenDeletion(e){this.apiTokenBeingDeleted=e}async deleteApiToken(){await Ie.delete(route("api-tokens.destroy",this.apiTokenBeingDeleted.id),{data:this.deleteApiTokenForm}),this.apiTokenBeingDeleted=null,Be.reload({preserveScroll:!0,preserveState:!0})}get isManagingPermissions(){return this.managingPermissionsFor!=null}};E([z(Array)],T.prototype,"tokens",2);E([z(Array)],T.prototype,"availablePermissions",2);E([z(Array)],T.prototype,"defaultPermissions",2);T=E([Ee({components:{ActionMessage:Le,ActionSection:Me,FormSection:$e,InputError:Ne,VCard:M,VCardTitle:$,VCardText:N,VCardActions:j,VDialog:L,VCheckbox:q,VBtn:f,VTextField:oe,VRow:S,VCol:w,VSnackbar:st}})],T);const rt=je(T),ut={key:0},mt={class:"d-flex align-center"},dt={key:0,class:"text-grey-darken-1 text-caption"},pt={class:"font-mono text-sm break-all"};function ft(t,e,s,l,u,v){const d=C("InputError"),V=C("InputLabel"),c=C("ActionMessage"),A=C("FormSection"),P=C("ActionSection");return m(),g("div",null,[o(A,{onSubmitted:t.createApiToken},{title:a(()=>e[9]||(e[9]=[i(" Create API Token ")])),description:a(()=>e[10]||(e[10]=[i(" API tokens allow third-party services to authenticate with our application on your behalf. ")])),form:a(()=>[o(S,null,{default:a(()=>[o(w,{cols:"12",md:"6"},{default:a(()=>[o(oe,{id:"name",modelValue:t.createApiTokenForm.name,"onUpdate:modelValue":e[0]||(e[0]=n=>t.createApiTokenForm.name=n),label:"Name",autofocus:"",outlined:"",dense:""},null,8,["modelValue"]),o(d,{message:t.createApiTokenForm.errors.name,class:"mt-2"},null,8,["message"])]),_:1})]),_:1}),t.availablePermissions.length>0?(m(),y(S,{key:0},{default:a(()=>[o(w,{cols:"12"},{default:a(()=>[o(V,{for:"permissions",value:"Permissions"}),o(S,{class:"mt-2"},{default:a(()=>[(m(!0),g(Y,null,h(t.availablePermissions,n=>(m(),y(w,{key:n,cols:"12",md:"6"},{default:a(()=>[o(q,{modelValue:t.createApiTokenForm.permissions,"onUpdate:modelValue":e[1]||(e[1]=k=>t.createApiTokenForm.permissions=k),value:n,label:n},null,8,["modelValue","value","label"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):F("",!0)]),actions:a(()=>[o(c,{on:t.createApiTokenForm.recentlySuccessful,class:"me-3"},{default:a(()=>e[11]||(e[11]=[i(" Created. ")])),_:1},8,["on"]),o(f,{color:"primary",loading:t.createApiTokenForm.processing,elevation:"2",type:"submit"},{default:a(()=>e[12]||(e[12]=[i(" Create ")])),_:1},8,["loading"])]),_:1},8,["onSubmitted"]),t.tokens.length>0?(m(),g("div",ut,[o(P,null,{title:a(()=>e[13]||(e[13]=[i(" Manage API Tokens ")])),description:a(()=>e[14]||(e[14]=[i(" You may delete any of your existing tokens if they are no longer needed. ")])),content:a(()=>[o(xe,null,{default:a(()=>[(m(!0),g(Y,null,h(t.tokens,n=>(m(),y(_e,{key:n.id},{append:a(()=>[G("div",mt,[n.last_used_ago?(m(),g("span",dt," Last used "+H(n.last_used_ago),1)):F("",!0),t.availablePermissions.length>0?(m(),y(f,{key:1,text:"",class:"ms-4",onClick:k=>t.manageApiTokenPermissions(n)},{default:a(()=>e[15]||(e[15]=[i(" Permissions ")])),_:2},1032,["onClick"])):F("",!0),o(f,{text:"",color:"red",class:"ms-4",onClick:k=>t.confirmApiTokenDeletion(n)},{default:a(()=>e[16]||(e[16]=[i(" Delete ")])),_:2},1032,["onClick"])])]),default:a(()=>[o(et,null,{default:a(()=>[i(H(n.name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):F("",!0),o(L,{modelValue:t.displayingToken,"onUpdate:modelValue":e[3]||(e[3]=n=>t.displayingToken=n),"max-width":"500"},{default:a(()=>[o(M,null,{default:a(()=>[o($,null,{default:a(()=>e[17]||(e[17]=[i("API Token")])),_:1}),o(N,null,{default:a(()=>[e[18]||(e[18]=G("p",null,"Please copy your new API token. For your security, it won't be shown again.",-1)),t.$page.props.jetstream.flash.token?(m(),y(tt,{key:0,class:"mt-4",density:"compact",variant:"tonal",type:"info"},{default:a(()=>[G("span",pt,H(t.$page.props.jetstream.flash.token),1)]),_:1})):F("",!0)]),_:1}),o(j,null,{default:a(()=>[o(te),o(f,{variant:"outlined",onClick:e[2]||(e[2]=n=>t.displayingToken=!1)},{default:a(()=>e[19]||(e[19]=[i("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(L,{modelValue:t.isManagingPermissions,"onUpdate:modelValue":e[6]||(e[6]=n=>t.isManagingPermissions=n),persistent:"","max-width":"500px"},{default:a(()=>[o(M,null,{default:a(()=>[o($,null,{default:a(()=>e[20]||(e[20]=[i(" API Token Permissions ")])),_:1}),o(N,null,{default:a(()=>[o(ot,null,{default:a(()=>[o(S,null,{default:a(()=>[(m(!0),g(Y,null,h(t.availablePermissions,n=>(m(),y(w,{key:n,cols:"12",md:"6"},{default:a(()=>[o(q,{modelValue:t.updateApiTokenForm.permissions,"onUpdate:modelValue":e[4]||(e[4]=k=>t.updateApiTokenForm.permissions=k),label:n,value:n},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),o(j,null,{default:a(()=>[o(te),o(f,{variant:"outlined",onClick:e[5]||(e[5]=n=>t.managingPermissionsFor=null)},{default:a(()=>e[21]||(e[21]=[i(" Cancel ")])),_:1}),o(f,{color:"primary",loading:t.updateApiTokenForm.processing,onClick:t.updateApiToken},{default:a(()=>e[22]||(e[22]=[i(" Save ")])),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(L,{modelValue:t.apiTokenBeingDeleted,"onUpdate:modelValue":e[8]||(e[8]=n=>t.apiTokenBeingDeleted=n),"max-width":"500"},{default:a(()=>[o(M,null,{default:a(()=>[o($,null,{default:a(()=>e[23]||(e[23]=[i("Delete API Token")])),_:1}),o(N,null,{default:a(()=>e[24]||(e[24]=[i("Are you sure you would like to delete this API token?")])),_:1}),o(j,{class:"justify-end"},{default:a(()=>[o(f,{variant:"outlined",onClick:e[7]||(e[7]=n=>t.apiTokenBeingDeleted=null)},{default:a(()=>e[25]||(e[25]=[i(" Cancel ")])),_:1}),o(f,{color:"error",class:"ms-3",loading:t.deleteApiTokenForm.processing,onClick:t.deleteApiToken},{default:a(()=>e[26]||(e[26]=[i(" Delete ")])),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Nt=Re(rt,[["render",ft]]);export{Nt as default};
