var xe=Object.defineProperty;var ye=(e,t,o)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var _=(e,t,o)=>ye(e,typeof t!="symbol"?t+"":t,o);import{I as Ve}from"./InputError-BX8IdEyR.js";import{z as we,E as Ce,G as Fe,d as N,r as V,O as be,_ as Pe,h as Ie,g as w,$ as ke,N as _e,Y as D,a0 as Ne,Q as Se,b as s,R,F as O,e as J,S as Re,a1 as Be,a2 as $e,a3 as Ee,C as Me,a4 as ze,q as K,x as Ae,f as S,w as d,a as x,t as H,l as W,c as De,y as X,o as C,m as y}from"./app-55nQHNrK.js";import{t as Oe,d as He,C as Te,V as Ge,a as B,_ as je}from"./_plugin-vue_export-helper-BkxQ5w1y.js";import{m as Ue,b as Le,u as qe,a as Z,c as ee,d as Qe}from"./VField-3MKmkEWW.js";import{f as Ye}from"./forwardRefs-B931MWyl.js";import{I as Je,a as T}from"./VAvatar-DmRN7j2J.js";import{V as te,a as ae,b as G}from"./VMenu-B0yEDWNa.js";const Ke=we({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ue(),...Le()},"VTextarea"),se=Ce()({name:"VTextarea",directives:{Intersect:Je},inheritAttrs:!1,props:Ke(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:o,emit:m,slots:n}=t;const r=Fe(e,"modelValue"),{isFocused:i,focus:c,blur:ne}=qe(e),re=N(()=>typeof e.counterValue=="function"?e.counterValue(r.value):(r.value||"").toString().length),le=N(()=>{if(o.maxlength)return o.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function ie(a,u){var l,f;!e.autofocus||!a||(f=(l=u[0].target)==null?void 0:l.focus)==null||f.call(l)}const j=V(),F=V(),U=be(""),b=V(),ue=N(()=>e.persistentPlaceholder||i.value||e.active);function E(){var a;b.value!==document.activeElement&&((a=b.value)==null||a.focus()),i.value||c()}function de(a){E(),m("click:control",a)}function ce(a){m("mousedown:control",a)}function fe(a){a.stopPropagation(),E(),D(()=>{r.value="",$e(e["onClick:clear"],a)})}function me(a){var l;const u=a.target;if(r.value=u.value,(l=e.modelModifiers)!=null&&l.trim){const f=[u.selectionStart,u.selectionEnd];D(()=>{u.selectionStart=f[0],u.selectionEnd=f[1]})}}const p=V(),P=V(Number(e.rows)),M=N(()=>["plain","underlined"].includes(e.variant));Pe(()=>{e.autoGrow||(P.value=Number(e.rows))});function h(){e.autoGrow&&D(()=>{if(!p.value||!F.value)return;const a=getComputedStyle(p.value),u=getComputedStyle(F.value.$el),l=parseFloat(a.getPropertyValue("--v-field-padding-top"))+parseFloat(a.getPropertyValue("--v-input-padding-top"))+parseFloat(a.getPropertyValue("--v-field-padding-bottom")),f=p.value.scrollHeight,I=parseFloat(a.lineHeight),z=Math.max(parseFloat(e.rows)*I+l,parseFloat(u.getPropertyValue("--v-input-control-height"))),A=parseFloat(e.maxRows)*I+l||1/0,g=Ee(f??0,z,A);P.value=Math.floor((g-l)/I),U.value=Ne(g)})}Ie(h),w(r,h),w(()=>e.rows,h),w(()=>e.maxRows,h),w(()=>e.density,h);let v;return w(p,a=>{a?(v=new ResizeObserver(h),v.observe(p.value)):v==null||v.disconnect()}),ke(()=>{v==null||v.disconnect()}),_e(()=>{const a=!!(n.counter||e.counter||e.counterValue),u=!!(a||n.details),[l,f]=Se(o),{modelValue:I,...z}=Z.filterProps(e),A=ee.filterProps(e);return s(Z,R({ref:j,modelValue:r.value,"onUpdate:modelValue":g=>r.value=g,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":M.value},e.class],style:e.style},l,z,{centerAffix:P.value===1&&!M.value,focused:i.value}),{...n,default:g=>{let{id:k,isDisabled:L,isDirty:q,isReadonly:ve,isValid:ge}=g;return s(ee,R({ref:F,style:{"--v-textarea-control-height":U.value},onClick:de,onMousedown:ce,"onClick:clear":fe,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},A,{id:k.value,active:ue.value||q.value,centerAffix:P.value===1&&!M.value,dirty:q.value||e.dirty,disabled:L.value,focused:i.value,error:ge.value===!1}),{...n,default:pe=>{let{props:{class:Q,...Y}}=pe;return s(O,null,[e.prefix&&s("span",{class:"v-text-field__prefix"},[e.prefix]),J(s("textarea",R({ref:b,class:Q,value:r.value,onInput:me,autofocus:e.autofocus,readonly:ve.value,disabled:L.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:E,onBlur:ne},Y,f),null),[[Re("intersect"),{handler:ie},null,{once:!0}]]),e.autoGrow&&J(s("textarea",{class:[Q,"v-textarea__sizer"],id:`${Y.id}-sizer`,"onUpdate:modelValue":he=>r.value=he,ref:p,readonly:!0,"aria-hidden":"true"},null),[[Be,r.value]]),e.suffix&&s("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:u?g=>{var k;return s(O,null,[(k=n.details)==null?void 0:k.call(n,g),a&&s(O,null,[s("span",null,null),s(Qe,{active:e.persistentCounter||i.value,value:re.value,max:le.value,disabled:e.disabled},n.counter)])])}:void 0})}),Ye({},j,F,b)}});var We=Object.defineProperty,Xe=Object.getOwnPropertyDescriptor,oe=(e,t,o,m)=>{for(var n=m>1?void 0:m?Xe(t,o):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(n=(m?i(t,o,n):i(n))||n);return m&&n&&We(t,o,n),n};let $=class extends Ge{constructor(){super(...arguments);_(this,"chirp");_(this,"editing",!1);_(this,"form",Me({message:""}))}mounted(){this.resetForm()}get createdAt(){return ze(this.chirp.created_at).fromNow()}resetForm(o=!1){this.editing=o,this.form.reset(),this.form.message=this.chirp.message}async update(){let o=await K.put(route("chirps.update",this.chirp.id),{message:this.form.message});this.$emit("update",o.data.chirp),this.resetForm(),this.editing=!1}async remove(){let o=await K.delete(route("chirps.destroy",this.chirp.id));console.log(o),this.$emit("remove",this.chirp.id)}};oe([He(Object)],$.prototype,"chirp",2);$=oe([Te({components:{VMenu:te,VTextarea:se,VBtn:B,VIcon:T,VList:ae,VListItem:G,InputError:Ve}})],$);const Ze=Oe($),et={class:"p-6 flex space-x-2"},tt={class:"flex-1"},at={class:"flex justify-between items-center"},st={class:"text-gray-800"},ot={class:"ml-2 text-sm text-gray-600"},nt={key:0,class:"text-sm text-gray-600"},rt={class:"mt-4 d-flex gap-2"},lt={key:1,class:"mt-4 text-lg text-gray-900"};function it(e,t,o,m,n,r){const i=Ae("InputError");return C(),S("div",et,[s(T,{size:"32",class:"text-gray-600"},{default:d(()=>t[4]||(t[4]=[y("mdi-message")])),_:1}),x("div",tt,[x("div",at,[x("div",null,[x("span",st,H(e.chirp.user.name),1),x("small",ot,H(e.createdAt),1),e.chirp.created_at!==e.chirp.updated_at?(C(),S("small",nt," Â· edited")):W("",!0)]),e.chirp.user.id===e.$page.props.auth.user.id?(C(),De(te,{key:0},{activator:d(({props:c})=>[s(B,R({icon:""},c,{variant:"plain"}),{default:d(()=>[s(T,null,{default:d(()=>t[5]||(t[5]=[y("mdi-dots-vertical")])),_:1})]),_:2},1040)]),default:d(()=>[s(ae,null,{default:d(()=>[s(G,{onClick:t[0]||(t[0]=c=>e.resetForm(!0))},{default:d(()=>t[6]||(t[6]=[y("Edit")])),_:1}),s(G,{onClick:X(e.remove,["prevent"])},{default:d(()=>t[7]||(t[7]=[y("Delete")])),_:1},8,["onClick"])]),_:1})]),_:1})):W("",!0)]),e.editing?(C(),S("form",{key:0,onSubmit:t[3]||(t[3]=X((...c)=>e.update&&e.update(...c),["prevent"]))},[s(se,{modelValue:e.form.message,"onUpdate:modelValue":t[1]||(t[1]=c=>e.form.message=c),class:"mt-4",label:"Edit message","auto-grow":""},null,8,["modelValue"]),s(i,{message:e.form.errors.message,class:"mt-2"},null,8,["message"]),x("div",rt,[s(B,{color:"primary",variant:"elevated",type:"submit"},{default:d(()=>t[8]||(t[8]=[y("Save")])),_:1}),s(B,{color:"secondary",variant:"text",onClick:t[2]||(t[2]=c=>e.resetForm(!1))},{default:d(()=>t[9]||(t[9]=[y("Cancel")])),_:1})])],32)):(C(),S("p",lt,H(e.chirp.message),1))])])}const xt=je(Ze,[["render",it]]);export{xt as C,se as V};
