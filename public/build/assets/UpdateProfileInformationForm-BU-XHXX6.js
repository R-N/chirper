var U=Object.defineProperty;var j=(e,o,t)=>o in e?U(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var u=(e,o,t)=>j(e,typeof o!="symbol"?o+"":o,t);import{_ as N}from"./ActionMessage-BdQ6Ope5.js";import{_ as E}from"./FormSection-CN1tMcTt.js";import{_ as T}from"./InputError-BJCQ_2OS.js";import{_ as A}from"./InputLabel-rm7JmSlO.js";import{_ as D}from"./PrimaryButton-CoZ8PQbO.js";import{_ as O}from"./SecondaryButton-ATj6J-qY.js";import{_ as z}from"./TextInput-CoUy5fzm.js";import{C as M,i as P,W as S,P as R,j as l,c as C,w as a,o as h,g as m,e as V,a as i,b as s,p as g,H as y,L as q,k as _,f as I,n as W}from"./app-DCXzMWXa.js";import{t as H,d as Y,a as G,C as J,V as K}from"./index-CSEC8W1N.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SectionTitle-Da4cl8iM.js";var X=Object.defineProperty,Z=Object.getOwnPropertyDescriptor,w=(e,o,t,n)=>{for(var r=n>1?void 0:n?Z(o,t):o,c=e.length-1,p;c>=0;c--)(p=e[c])&&(r=(n?p(o,t,r):p(r))||r);return n&&r&&X(o,t,r),r};let f=class extends K{constructor(){super(...arguments);u(this,"user",null);u(this,"form",M({_method:"PUT",name:"",email:"",photo:null}));u(this,"verificationLinkSent",null);u(this,"photoPreview",null);u(this,"photoInput")}mounted(){this.form.name=this.user.name,this.form.email=this.user.email}async submit(){await P.patch(route("profile.update"),this.form)}async updateProfileInformation(){var n;this.photoInput&&(this.form.photo=this.photoInput.files[0]);const t=new FormData;t.append("name",this.form.name),t.append("email",this.form.email),this.photoInput&&t.append("photo",this.photoInput.files[0]);try{let r=await P.post(route("user-profile-information.update"),t,{headers:{"Content-Type":"multipart/form-data"},params:{_method:"PUT"}});this.clearPhotoFileInput(),S.reload({preserveScroll:!0})}catch(r){((n=r.response)==null?void 0:n.status)===422?this.form.errors=r.response.data.errors:console.error("Unexpected error:",r)}}sendEmailVerification(){this.verificationLinkSent=!0}selectNewPhoto(){this.photoInput.click()}async updatePhotoPreview(){const t=this.photoInput.files[0];if(!t)return;const n=new FileReader;return n.onload=r=>{this.photoPreview=r.target.result},await n.readAsDataURL(t)}async deletePhoto(){await P.delete(route("current-user-photo.destroy")),this.photoPreview=null,this.clearPhotoFileInput(),S.reload({preserveScroll:!0})}clearPhotoFileInput(){var t;(t=this.photoInput)!=null&&t.value&&(this.photoInput.value=null)}};w([Y(Object)],f.prototype,"user",2);w([G("photoInput")],f.prototype,"photoInput",2);f=w([J({components:{ActionMessage:N,FormSection:E,InputError:T,InputLabel:A,PrimaryButton:D,SecondaryButton:O,TextInput:z,Link:R}})],f);const x=H(f),ee={key:0,class:"col-span-6 sm:col-span-4"},oe={class:"mt-2"},te=["src","alt"],re={class:"mt-2"},se={class:"col-span-6 sm:col-span-4"},ne={class:"col-span-6 sm:col-span-4"},ae={key:0},ie={class:"text-sm mt-2 dark:text-white"},le={class:"mt-2 font-medium text-sm text-green-600 dark:text-green-400"};function me(e,o,t,n,r,c){const p=l("InputLabel"),k=l("SecondaryButton"),v=l("InputError"),b=l("TextInput"),$=l("Link"),F=l("ActionMessage"),L=l("PrimaryButton"),B=l("FormSection");return h(),C(B,{onSubmitted:e.updateProfileInformation,enctype:"multipart/form-data"},{title:a(()=>o[3]||(o[3]=[m(" Profile Information ")])),description:a(()=>o[4]||(o[4]=[m(" Update your account's profile information and email address. ")])),form:a(()=>[e.$page.props.jetstream.managesProfilePhotos?(h(),V("div",ee,[i("input",{id:"photo",ref:"photoInput",type:"file",class:"hidden",onChange:o[0]||(o[0]=(...d)=>e.updatePhotoPreview&&e.updatePhotoPreview(...d)),accept:".jpg,.jpeg,.png"},null,544),s(p,{for:"photo",value:"Photo"}),g(i("div",oe,[i("img",{src:e.user.profile_photo_url,alt:e.user.name,class:"rounded-full size-20 object-cover"},null,8,te)],512),[[y,!e.photoPreview]]),g(i("div",re,[i("span",{class:"block rounded-full size-20 bg-cover bg-no-repeat bg-center",style:q("background-image: url('"+e.photoPreview+"');")},null,4)],512),[[y,e.photoPreview]]),s(k,{class:"mt-2 me-2",type:"button",onClick:_(e.selectNewPhoto,["prevent"])},{default:a(()=>o[5]||(o[5]=[m(" Select A New Photo ")])),_:1},8,["onClick"]),e.user.profile_photo_path?(h(),C(k,{key:0,type:"button",class:"mt-2",onClick:_(e.deletePhoto,["prevent"])},{default:a(()=>o[6]||(o[6]=[m(" Remove Photo ")])),_:1},8,["onClick"])):I("",!0),s(v,{message:e.form.errors.photo,class:"mt-2"},null,8,["message"])])):I("",!0),i("div",se,[s(p,{for:"name",value:"Name"}),s(b,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":o[1]||(o[1]=d=>e.form.name=d),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),s(v,{message:e.form.errors.name,class:"mt-2"},null,8,["message"])]),i("div",ne,[s(p,{for:"email",value:"Email"}),s(b,{id:"email",modelValue:e.form.email,"onUpdate:modelValue":o[2]||(o[2]=d=>e.form.email=d),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"]),s(v,{message:e.form.errors.email,class:"mt-2"},null,8,["message"]),e.$page.props.jetstream.hasEmailVerification&&e.user.email_verified_at===null?(h(),V("div",ae,[i("p",ie,[o[8]||(o[8]=m(" Your email address is unverified. ")),s($,{href:e.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800",onClick:_(e.sendEmailVerification,["prevent"])},{default:a(()=>o[7]||(o[7]=[m(" Click here to re-send the verification email. ")])),_:1},8,["href","onClick"])]),g(i("div",le," A new verification link has been sent to your email address. ",512),[[y,e.verificationLinkSent]])])):I("",!0)])]),actions:a(()=>[s(F,{on:e.form.recentlySuccessful,class:"me-3"},{default:a(()=>o[9]||(o[9]=[m(" Saved. ")])),_:1},8,["on"]),s(L,{class:W({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:a(()=>o[10]||(o[10]=[m(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"])}const ke=Q(x,[["render",me]]);export{ke as default};
