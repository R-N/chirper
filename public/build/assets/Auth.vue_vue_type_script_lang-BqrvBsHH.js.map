{"version":3,"file":"Auth.vue_vue_type_script_lang-BqrvBsHH.js","sources":["../../../resources/js/modules/user/auth/services/auth.js","../../../resources/js/modules/user/auth/layouts/Auth.vue"],"sourcesContent":["import { useAuthStore } from '@/stores/auth';\r\nimport _axios from '@/plugins/axios'; \r\n\r\nclass AuthService{\r\n  constructor(axios) {\r\n    this.axios = axios || _axios;\r\n  }\r\n\r\n  async login(form) {\r\n    const authStore = useAuthStore();\r\n\r\n    form = form.transform(data => ({\r\n        ...data,\r\n        remember: data.remember ? 'on' : '',\r\n    }));\r\n\r\n    let res = await this.axios.post(\"/login\", form);\r\n    console.log(res);\r\n    authStore.updateUser(res.data.user);\r\n    authStore.auth_token = res.data.auth_token;\r\n    return res;\r\n  }\r\n  async logout() {\r\n    const authStore = useAuthStore();\r\n\r\n    let res = await this.axios.post(\"/logout\");\r\n\r\n    authStore.logout();\r\n    return res;\r\n  }\r\n  async switchToTeam(team){\r\n    // router.put(route('current-team.update'), {\r\n    //   team_id: team.id,\r\n    // }, {\r\n    //   preserveState: false,\r\n    // });\r\n    let res = await this.axios.put(route('current-team.update'), {\r\n      team_id: team.id,\r\n    });\r\n    return res.data;\r\n  };\r\n  async register(form) {\r\n    const authStore = useAuthStore();\r\n    let res = await this.axios.post(\"/register\", form);\r\n    if (res.data.suer) authStore.updateUser(res.data.user);\r\n    if (res.data.auth_token) authStore.setAuthToken(res.data.auth_token);\r\n    return res.data;\r\n  }\r\n  async twoFactorLogin(form) {\r\n    // await form.post(route('two-factor.login'));\r\n    let res = await this.axios.post(route('two-factor.login'), form);\r\n    return res.data;\r\n  }\r\n  async forgotPassword(form) {\r\n    //await form.post(route('password.email'));\r\n    let res = await this.axios.post(route('password.email'), form);\r\n    return res.data;\r\n  }\r\n  async resetPassword(form) {\r\n    //let target = route('password.store');\r\n    let target = route('password.update');\r\n    let res = await this.axios.post(target, form);\r\n    return res.data;\r\n  }\r\n  async confirmPassword(form) {\r\n    //await form.post(route('password.confirm'));\r\n    let res = await this.axios.post(route('password.confirm'), form);\r\n    return res.data;\r\n  }\r\n}\r\n\r\nconst authService = new AuthService();\r\n\r\nexport { AuthService, authService };\r\nexport default authService;\r\n","\r\n<script lang=\"ts\">\r\nimport AuthenticationCardLogo from '@/components/auth/AuthenticationCardLogo.vue';\r\nimport { Component, Prop, toNative } from 'vue-facing-decorator';\r\nimport { BaseView } from '@/views/BaseView.vue';\r\n\r\nimport CenterLayout from '@/components/layout/CenterLayout.vue';\r\n\r\n@Component({\r\n  name: \"AuthLayout\",\r\n  components: {\r\n    AuthenticationCardLogo,\r\n    CenterLayout,\r\n  }\r\n})\r\nclass AuthLayout extends BaseView {\r\n}\r\nexport { AuthLayout };\r\nexport default toNative(AuthLayout);\r\n</script>\r\n<template>\r\n  <CenterLayout :column=\"true\">\r\n    <AuthenticationCardLogo justify=\"center\" align=\"center\" class=\"mb-4\" />\r\n    <slot></slot>\r\n  </CenterLayout>\r\n</template>\r\n<style scoped>\r\n\r\n</style>\r\n"],"names":["_axios","AuthenticationCardLogo"],"mappings":";;;AAGA,MAAM,YAAW;AAAA,EACf,YAAY,OAAO;AACjB,SAAK,QAAQ,SAASA;AAAAA,EACvB;AAAA,EAED,MAAM,MAAM,MAAM;AAChB,UAAM,YAAY;AAElB,WAAO,KAAK,UAAU,WAAS;AAAA,MAC3B,GAAG;AAAA,MACH,UAAU,KAAK,WAAW,OAAO;AAAA,IACpC,EAAC;AAEF,QAAI,MAAM,MAAM,KAAK,MAAM,KAAK,UAAU,IAAI;AAC9C,YAAQ,IAAI,GAAG;AACf,cAAU,WAAW,IAAI,KAAK,IAAI;AAClC,cAAU,aAAa,IAAI,KAAK;AAChC,WAAO;AAAA,EACR;AAAA,EACD,MAAM,SAAS;AACb,UAAM,YAAY;AAElB,QAAI,MAAM,MAAM,KAAK,MAAM,KAAK,SAAS;AAEzC,cAAU,OAAM;AAChB,WAAO;AAAA,EACR;AAAA,EACD,MAAM,aAAa,MAAK;AAMtB,QAAI,MAAM,MAAM,KAAK,MAAM,IAAI,MAAM,qBAAqB,GAAG;AAAA,MAC3D,SAAS,KAAK;AAAA,IACpB,CAAK;AACD,WAAO,IAAI;AAAA,EACZ;AAAA,EACD,MAAM,SAAS,MAAM;AACnB,UAAM,YAAY;AAClB,QAAI,MAAM,MAAM,KAAK,MAAM,KAAK,aAAa,IAAI;AACjD,QAAI,IAAI,KAAK,KAAM,WAAU,WAAW,IAAI,KAAK,IAAI;AACrD,QAAI,IAAI,KAAK,WAAY,WAAU,aAAa,IAAI,KAAK,UAAU;AACnE,WAAO,IAAI;AAAA,EACZ;AAAA,EACD,MAAM,eAAe,MAAM;AAEzB,QAAI,MAAM,MAAM,KAAK,MAAM,KAAK,MAAM,kBAAkB,GAAG,IAAI;AAC/D,WAAO,IAAI;AAAA,EACZ;AAAA,EACD,MAAM,eAAe,MAAM;AAEzB,QAAI,MAAM,MAAM,KAAK,MAAM,KAAK,MAAM,gBAAgB,GAAG,IAAI;AAC7D,WAAO,IAAI;AAAA,EACZ;AAAA,EACD,MAAM,cAAc,MAAM;AAExB,QAAI,SAAS,MAAM,iBAAiB;AACpC,QAAI,MAAM,MAAM,KAAK,MAAM,KAAK,QAAQ,IAAI;AAC5C,WAAO,IAAI;AAAA,EACZ;AAAA,EACD,MAAM,gBAAgB,MAAM;AAE1B,QAAI,MAAM,MAAM,KAAK,MAAM,KAAK,MAAM,kBAAkB,GAAG,IAAI;AAC/D,WAAO,IAAI;AAAA,EACZ;AACH;AAEK,MAAC,cAAc,IAAI,YAAW;;;;;;;;;;;ACxD7B,IAAA,aAAN,cAAyB,SAAS;AAClC;AADM,aAAN,gBAAA;AAAA,EAPC,UAAU;AAAA,IACT,MAAM;AAAA,IACN,YAAY;AAAA,MAAA,wBACVC;AAAAA,MACA;AAAA,IAAA;AAAA,EAEH,CAAA;AAAA,GACK,UAAA;AAGN,MAAe,YAAA,SAAS,UAAU;"}